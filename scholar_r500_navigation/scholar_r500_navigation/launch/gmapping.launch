<launch>
    <arg name="scan_topic" default="front_scan" />

    <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen" clear_params="true">
       
       <param name = "odom_frame"  value = "/odom" />
       <param name = "base_frame"  value = "/base_link" />
       <param name = "map_frame"  value = "/map" />

       <param name = "map_update_interval"  value = "0.5" />
       <!--gmapping过程中每间隔map_update_interval秒更新一次地图，
           该值变小的话表明更新地图的频率加快，会增加消耗更多当前系统的CPU计算资源。
            # 同时地图更新也受scanmach的影响，如果scanmatch没有成功的话，不会更新地图-->>

       <param name = "maxUrange"  value = "7.5" />
       <param name = "maxRange"  value = "8.0" />
       <param name = "particles"  value = "30" /><!--算法中的粒子数,gmapping使用的是粒子滤波算法，粒子在不断地迭代更新，所以选取一个合适的粒子数可以让算法在保证比较准确的同时有较高的速度。-->

       <param name = "linearUpdate"  value = "0.05" /><!--机器人移动多远距离，进行一次scanmatch匹配。-->
       <param name = "angularUpdate"  value = "0.0436" /><!--机器人旋转多少弧度，进行一次scanmatch匹配。-->
       <param name = "temporalUpdate"  value = "1.0" /><!--如果最新扫描处理比更新慢，则处理1次扫描，该值为负数时候关闭基于时间的更新，该参数很重要，需要重点关注。-->
       <param name = "resampleThreshold"  value = "0.5" /><!--基于重采样门限的Neff-->

       <param name = "xmin"  value = "-10.0" />
       <param name = "ymin"  value = "-10.0" />
       <param name = "xmax"  value = "10.0" />
       <param name = "ymax"  value = "10.0" />
       <param name = "delta"  value = "0.05" /><!--创建的地图分辨率，默认是0.05m -->       

       <param name = "llsamplerange"  value = "0.01" /><!--线速度移动多长距离进行似然估计-->
       <param name = "llsamplestep"  value = "0.01" /><!--线速度移动多少步长进行似然估计。-->
       <param name = "lasamplerange"  value = "0.005" /><!--每转动多少弧度用于似然估计-->
       <param name = "lasamplestep"  value = "0.005" /><!--用于似然估计的弧度采样步长是多少-->
       <param name = "transform_publish_period"  value = "0.05" /><!--多长时间发布一次tf转换（map->odom转换），单位是秒。-->
       <param name = "occ_thresh"  value = "0.25" /><!--gmapping过程中占有栅格地图的阈值，只有当前单元格的占有率超过该值才认为是被占有。如果设置该值为1的话就会导致任何障碍物都不会认为是占有。-->

       <param name = "throttle_scans"  value = "1" />
       <param name = "sigma"  value = "0.05" /><!--endpoint匹配标准差,默认0.05-->
       <param name = "kernelSize"  value = "3" /><!--查找对应的kernel size，默认1-->
       <param name = "lstep"  value = "0.05" /><!--平移优化步长，默认0。05-->
       <param name = "astep"  value = "0.05" /><!--旋转优化步长，默认0。05-->
       <param name = "iterations"  value = "5" /><!--扫描匹配迭代次数，默认5-->
       <param name = "lsigma"  value = "0.075" /><!--扫描匹配概率的激光标准差-->
       <param name = "ogain"  value = "3.0" /><!--似然估计为平滑采样影响使用的gain-->
       <param name = "lskip"  value = "0" /><!--每次扫描跳过的光束数-->

       <param name = "minimumScore"  value = "50" /><!-- 最小匹配得分，决定了对激光的置信度，越高说明对激光匹配算法的要求越高，激光的匹配越容易失败而转去使用里程计数据，设的太低又会使地图中出现大量噪声，所以需要权衡调整-->

       <param name = "srr"  value = "0.01" /><!--平移时里程计误差作为平移函数-->
       <param name = "srt"  value = "0.02" /><!--平移时里程计误差作为旋转函数，默认0.2-->
       <param name = "str"  value = "0.01" /><!--旋转时里程计误差作为平移函数,默认0.1-->
       <param name = "stt"  value = "0.02" /><!--旋转时里程误差作为旋转函数-->

    <remap from="scan" to="$(arg scan_topic)"/> <!--重映射激光雷达主题-->
    </node>

</launch>
